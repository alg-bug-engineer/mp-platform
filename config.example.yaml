app_name: ${APP_NAME:-content-studio}
server:
   #服务名称
   name: ${SERVER_NAME:-content-studio}
   #前端显示名称
   web_name: ${WEB_NAME:-商业化内容创作平台}
   #过期是否发送授权二维通知 默认True
   send_code: ${SEND_CODE:-True}
   #二维通知标题
   code_title: ${CODE_TITLE:-Content Studio}
   #启动JOB定时任务，默认为True
   enable_job: ${ENABLE_JOB:-True}
   #代码修改自动重启服务，默认为False
   auto_reload: ${AUTO_RELOAD:-True}
   #最大线程数 默认2个线程，不建议超过4个线程
   threads: ${THREADS:-1}
   #通过web方式授权二维码 默认False 
   auth_web: ${WERSS_AUTH_WEB:-True}


#数据库连接 例如db:  mysql+pymysql://<username>:<password>@<host>/we-rss?charset=utf8mb4
#PostgreSQL 连接示例: postgresql://<username>:<password>@<host>/<database>
#需要注意数据库连接字符串的格式，如果是sqlite数据库，则使用sqlite:///路径的形式，如果是mysql数据库，
#则使用mysql+pymysql://<username>:<password>@<host>/<database>?charset=<数据库编码>的形式
db: ${DB:-sqlite:///data/db.db}
#通知
notice:
  #通知方式，可选dingding、wechat、feishu、custom
  dingding: "${DINGDING_WEBHOOK}"
  wechat: "${WECHAT_WEBHOOK}"
  feishu: "${FEISHU_WEBHOOK}"
  custom: "${CUSTOM_WEBHOOK}"
  
secret: ${SECRET_KEY:-content-studio}
user_agent: ${USER_AGENT:-Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36/ContentStudio}

#定时任务执行每篇稿件间隔时间 单位秒 默认10s 允许值 1-60秒之间
interval: ${SPAN_INTERVAL:- 10}

webhook:
  #文章内容的发送格式(默认使用html格式，可选text、markdown)
  content_format: ${WEBHOOK.CONTENT_FORMAT:-html}
  
#API服务端口
port: ${PORT:-8001}
#调试模式
debug: ${DEBUG:-False}


#最大页数 第一次添加 采集的页数默认5页
max_page: ${MAX_PAGE:-5}

rss:
  #RSS域名地址：如https://www.xxx.com/
  base_url: ${RSS_BASE_URL:-}
  #是否为本地RSS链接，默认True，当为False时直接出外部链接
  local: ${RSS_LOCAL:-False}
  #RSS标题
  title: ${RSS_TITLE:-}
  #RSS描述
  description: ${RSS_DESCRIPTION:-}
  #RSS封面
  cover: ${RSS_COVER:-}
  #是否显示全文 默认False
  full_context: ${RSS_FULL_CONTEXT:-True}
  #是否添加封面图片 默认False
  add_cover: ${RSS_ADD_COVER:-True}
  #RSS正文是否启用 CDATA
  cdata: ${RSS_CDATA:-False}
  #RSS分页大小 默认10
  page_size: ${RSS_PAGE_SIZE:-30}

#登录会话有效时长 单位分钟 默认4320分钟 3天
token_expire_minutes: ${TOKEN_EXPIRE_MINUTES:-4320}

cache:
  #缓存目录，默认为./data/cache
  dir: ${CACHE.DIR:-./data/cache}
  #是否启用缓存，默认为True
  enabled: ${CACHE.ENABLED:-True}
  #缓存过期时间，默认为3600秒（1小时）
  ttl: ${CACHE.TTL:-3600}
  #视图缓存配置
  views:
    #是否启用视图缓存，默认为True
    enabled: ${CACHE.VIEWS.ENABLED:-False}
    #视图缓存目录，默认为./data/cache/views
    dir: ${CACHE.VIEWS.DIR:-./data/cache/views}
    #视图缓存过期时间，默认为1800秒（30分钟）
    ttl: ${CACHE.VIEWS.TTL:-1800}

article:
  #是否真实删除文章，默认False，如果为True，则会删除数据库中的记录
  true_delete: ${ARTICLE.TRUE_DELETE:-False}

gather:
  #是否采集内容  默认False
  content: ${GATHER.CONTENT:-False}
  #采集模式，web模式（可采集到发布链接)，api模式（可采集临时链接），app模式（采集最新消息）
  model: ${GATHER.MODEL:-web}
  #是否自动检查未采集文章内容，默认False
  content_auto_check: ${GATHER.CONTENT_AUTO_CHECK:-True}
  #自动检查未采集文章内容的时间间隔 单位秒默认59分钟 允许值 1-59分钟之间 默认59分钟
  content_auto_interval: ${GATHER.CONTENT_AUTO_INTERVAL:-59}
  #内容修正模式，默认web 允许值 web、api
  content_mode: ${GATHER.CONTENT_MODE:-web}
  #是否清理html标签 默认True 
  clean_html: ${GATHER.CLEAN_HTML:-False}
  #浏览器类型 默认firefox 允许值 firefox/edge/webkit
  browser_type: ${BROWSER_TYPE:-firefox}
#安全配置
safe:
    # 需要隐藏的配置信息，用逗号分隔 如：db,secret,token等 
    hide_config: "${SAFE_HIDE_CONFIG:-db,secret,token,notice.wechat,notice.feishu,notice.dingding}"
    # 授权加密KEY
    lic_key: "${SAFE_LIC_KEY:-CONTENT_STUDIO}"
# 微信账号配置
wechat:
  # 允许切换的账号ID列表，为空表示允许所有账号，用逗号分隔
  # 例如: "account1,account2,account3" 或留空 ""
  allowed_accounts: "${WECHAT_ALLOWED_ACCOUNTS:-}"
  # 公众号后台 IP 白名单提示（用于前端弹窗展示）
  whitelist_ips: "${WECHAT_WHITELIST_IPS:-}"
  whitelist_guide: "${WECHAT_WHITELIST_GUIDE:-请在微信公众平台-设置与开发-基本配置-IP白名单中添加平台出口IP后，再执行草稿同步。}"
  whitelist_doc_url: "${WECHAT_WHITELIST_DOC_URL:-https://mp.weixin.qq.com/}"
log:
  #日志文件路径，默认为空字符串，表示不输出到文件。如果要输出到文件，可以指定一个路径如：/var/log/content-studio.log 如果为空就不纪录
   file: ${LOG_FILE:-}
  #日志级别，默认为INFO，可选DEBUG, INFO, WARNING, ERROR, CRITICAL
   level: ${LOG_LEVEL:-INFO}
export:
   pdf: 
    #是否启用PDF导出功能 默认False
    enable: ${EXPORT_PDF:-False}
    #PDF导出目录 默认./data/pdf
    dir: ${EXPORT_PDF_DIR:-./data/pdf}
   markdown:
    #是否启用markdown导出功能 默认False
    enable: ${EXPORT_MARKDOWN:-False}
    #markdown导出目录 默认./data/markdown
   dir: ${EXPORT_MARKDOWN_DIR:-./data/markdown}

ai:
  # 本地规则文件（标签推荐、平台模板、文风约束）
  local_rules_file: ${AI_LOCAL_RULES_FILE:-./data/ai_local_rules.yaml}
  # 每个用户每日 AI 调用总上限（分析/创作/仿写合计）
  daily_limit: ${AI_DAILY_LIMIT:-60}
  # 是否启用 AI 二次润色（降低模板腔）
  refine_enabled: ${AI_REFINE_ENABLED:-True}
  # 本地草稿箱目录（用于保存 AI 生成稿）
  draft_dir: ${AI_DRAFT_DIR:-./data/ai_drafts}
  # 投递队列处理间隔（秒）
  publish_queue_interval_seconds: ${AI_PUBLISH_QUEUE_INTERVAL_SECONDS:-45}
  # AI 创作任务队列 worker 数量（建议 2-4）
  compose_queue_workers: ${AI_COMPOSE_QUEUE_WORKERS:-3}
  # AI 创作任务队列每轮抓取数量
  compose_queue_batch_size: ${AI_COMPOSE_QUEUE_BATCH_SIZE:-3}
  # AI 创作队列空闲轮询间隔（秒）
  compose_queue_idle_sleep_seconds: ${AI_COMPOSE_QUEUE_IDLE_SLEEP_SECONDS:-1}
  # 单用户最多待处理创作任务数（pending+processing）
  compose_queue_max_pending_per_user: ${AI_COMPOSE_QUEUE_MAX_PENDING_PER_USER:-30}
  # 平台统一 AI 服务配置（前端用户无需填写 API Key）
  provider:
    base_url: ${AI_PROVIDER_BASE_URL:-https://api.moonshot.cn/v1}
    model_name: ${AI_PROVIDER_MODEL_NAME:-kimi-k2.5}
    api_key: ${AI_PROVIDER_API_KEY:-}
    temperature: ${AI_PROVIDER_TEMPERATURE:-70}
    force_platform: ${AI_PROVIDER_FORCE_PLATFORM:-True}
  jimeng:
    # 生图通道：local（本地 jimeng-api 容器）/ api（AK/SK 直连）
    channel: ${JIMENG_CHANNEL:-local}
    # 可配置多个本地地址，逗号分隔；适用于容器内访问宿主机（如 localhost:5100）
    local_base_urls: ${JIMENG_LOCAL_BASE_URLS:-}
    # local 通道配置（默认调用本地 docker 服务）
    local_base_url: ${JIMENG_LOCAL_BASE_URL:-http://127.0.0.1:5100}
    local_endpoint: ${JIMENG_LOCAL_ENDPOINT:-/v1/images/generations}
    local_model: ${JIMENG_LOCAL_MODEL:-jimeng-4.5}
    local_ratio: ${JIMENG_LOCAL_RATIO:-1:1}
    local_resolution: ${JIMENG_LOCAL_RESOLUTION:-2k}
    local_token: ${JIMENG_LOCAL_TOKEN:-}
    local_timeout_seconds: ${JIMENG_LOCAL_TIMEOUT_SECONDS:-120}
    # 即梦生图鉴权（为空则仅返回配图提示词）
    ak: ${JIMENG_AK:-}
    sk: ${JIMENG_SK:-}
    # 主模型，默认 v40。若权限不足将尝试 fallback_req_keys
    req_key: ${JIMENG_REQ_KEY:-jimeng_t2i_v40}
    fallback_req_keys: ${JIMENG_FALLBACK_REQ_KEYS:-jimeng_t2i_v30}
    scale: ${JIMENG_SCALE:-0.5}
    max_retries: ${JIMENG_MAX_RETRIES:-20}

billing:
  # 订阅到期扫描间隔（秒）
  subscription_sweep_interval_seconds: ${BILLING_SWEEP_INTERVAL_SECONDS:-3600}

product:
  # 运营模式：all_free（全站免费开放）或 commercial（套餐支付模式）
  mode: ${PRODUCT_MODE:-all_free}

analytics:
  # 是否启用全局埋点与统计
  enabled: ${ANALYTICS_ENABLED:-True}


site:
  name: ${SITE_NAME:-Content Studio}
  description: ${SITE_DESCRIPTION:-A commercial WeChat content studio}
  keywords: ${SITE_KEYWORDS:-}
